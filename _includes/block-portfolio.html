{% assign topics = '' %}

{% for post in site.portfolio %}
{% assign t = post.topics | join: "," %}
{% if t != "" %}
	{% capture topics %}{{topics}}{{t}},{% endcapture %}
{% endif %}
{% endfor %}

{% assign topics = topics | split: "," | uniq | sort: self %}

{% if block.topic != empty %}
{% assign portfolio = site.portfolio | where: "topics", block.topic %}
{% else %}
{% assign portfolio = site.portfolio %}
{% endif %}
<div data-uk-filter="target: [data-uk-grid]; animation: 500">
	{% if block.filter %}
		<ul class="uk-subnav uk-subnav-pill uk-flex uk-flex-center uk-margin-medium-bottom">
			<li class="uk-active" data-uk-filter-control><a href="#">All</a></li>
			{% for topic in topics %}
				<li data-uk-filter-control="[data-topic*='{{ topic }}']"><a href="#">{{ topic | capitalize }}</a></li>
			{% endfor %}
		</ul>
	{% endif %}

	<ul class="uk-child-width-1-2 uk-child-width-{{ block.grid | default: '1-4' }}@m{% if block.gutter %} uk-grid-{{ block.gutter }}{% endif %} uk-text-center" data-uk-grid="masonry: true">
		{% for post in portfolio %}
			<li data-topic="{{ post.topics }}">
				<div class="uk-inline uk-light uk-transition-toggle">
					<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="{% if post.image contains 'http' %}{{ post.image }}{% else %}{{ site.uploads | absolute_url }}{{ post.image }}{% endif %}" alt="{{ post.title }}" data-uk-img>
					<a href="{{ post.url | absolute_url }}" class="uk-overlay uk-overlay-primary uk-position-cover uk-transition-fade">
						<div class="uk-position-center">
							{% if block.title == 'bellow' %}
								<span data-uk-icon="icon: link; ratio: 1.5"></span>
							{% else %}
								<h5 class="uk-text-uppercase uk-margin-remove">{{ post.title }}</h5>
							{% endif %}
						</div>
					</a>
				</div>
				{% if block.title == 'bellow' %}
					<h5 class="uk-text-uppercase uk-margin-top uk-margin-remove-bottom">{{ post.title }}</h5>
				{% endif %}
			</li>
		{% endfor %}
	</ul>
</div>
