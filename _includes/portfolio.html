{% if include.section -%}
<div class="uk-section uk-section-large uk-section-{{ include.section | default: 'default' }} uk-text-{{ include.align | default: 'left' }}">
  <div class="uk-container">
{%- endif -%}
    {%- if include.title -%}
      <h2 class="uk-margin-large-bottom">{{- include.title -}}</h2>
    {%- endif -%}

		{% assign topics = '' %}

		{% for post in site.portfolio %}
			{% assign t = post.topics | join: "," %}
			{% if t != "" %}
				{% capture topics %}{{topics}}{{t}},{% endcapture %}
			{% endif %}
		{% endfor %}

		{% assign topics = topics | split: "," | uniq | sort: self %}

		{% if include.topic %}
			{% assign portfolio = site.portfolio | where: "topics", include.topic %}
		{% else %}
			{% assign portfolio = site.portfolio %}
		{% endif %}

		<div data-uk-filter="target: [data-uk-grid]; animation: 500">

			{% unless include.topic %}
				<ul class="uk-subnav uk-subnav-pill uk-flex uk-flex-center uk-margin-medium-bottom">
					<li class="uk-active" uk-filter-control><a href="#">All</a></li>
					{% for topic in topics %}
						<li uk-filter-control="[data-topic*='{{ topic }}']"><a href="#">{{ topic | capitalize }}</a></li>
					{% endfor %}
				</ul>
			{% endunless %}

			<ul class="uk-child-width-1-2 uk-child-width-1-3@m uk-text-center" data-uk-grid>
				{% for post in portfolio %}
					<li data-topic="{{ post.topics }}">
						<div class="uk-inline uk-light uk-transition-toggle">
							<img src="{% if post.image contains 'http' %}{{ post.image }}{% else %}{{ site.uploads | absolute_url }}{{ post.image }}{% endif %}" alt="{{ post.title }}">
							<a class="uk-overlay uk-overlay-primary uk-position-cover uk-transition-fade">
								<div class="uk-position-center">
									<span data-uk-overlay-icon></span>
								</div>
							</a>
						</div>
						<h3 class="uk-h4 uk-margin-medium-top uk-margin-remove-bottom">{{ post.title }}</h3>
					</li>
				{% endfor %}
			</ul>

		</div>

{% if include.section %}
  </div>
</div>
{% endif %}


