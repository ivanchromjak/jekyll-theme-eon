<div class="uk-section">
	<div class="uk-container uk-container-small">

		{% if include.title %}
			<h2 class="uk-h1 uk-text-center">{{ include.title }}</h2>
		{% endif %}

		{% if include.subtitle %}
			<p class="uk-text-center uk-text-lead">{{ include.subtitle | escape }}</p>
		{% endif %}

		{% assign topics = '' %}

		{% for post in site.portfolio %}
			{% assign t = post.topics | join: "," %}
			{% if t != "" %}
				{% capture topics %}{{topics}},{{t}}{% endcapture %}
			{% endif %}
		{% endfor %}

		{% assign topics = topics | split: "," | uniq | sort: self %}

		{% if include.topic %}
			{% assign portfolio = site.portfolio | where: "topics", include.topic %}
		{% else %}
			{% assign portfolio = site.portfolio %}
		{% endif %}

		<div data-uk-filter="target: [data-uk-grid]; animation: 500">

			{% unless include.topic %}
				<ul class="uk-subnav uk-subnav-pill">
					{% for topic in topics %}
						<li uk-filter-control="[data-topic*='{{ topic }}']"><a href="#">{{ topic | capitalize }}</a></li>
					{% endfor %}
				</ul>
			{% endunless %}

			<ul class="uk-child-width-1-2 uk-child-width-1-3@m uk-text-center" data-uk-grid>
				{% for post in portfolio %}
					<li data-topic="{{ post.topics }}">
						<div class="uk-inline uk-light uk-transition-toggle">
							<img src="{% if post.image contains 'http' %}{{ post.image }}{% else %}{{ site.uploads | absolute_url }}{{ post.image }}{% endif %}" alt="{{ post.title }}">
							<a class="uk-overlay uk-overlay-primary uk-position-cover uk-transition-fade">
								<div class="uk-position-center">
									<span data-uk-overlay-icon></span>
								</div>
							</a>
						</div>
						<h3 class="uk-h4 uk-margin-medium-top uk-margin-remove-bottom">{{ post.title }}</h3>
					</li>
				{% endfor %}
			</ul>

		</div>

	</div>
</div>

