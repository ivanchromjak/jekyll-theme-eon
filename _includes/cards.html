{% include partials/section-open.html 
  section_size=include.section_size
  section_padding=include.section_padding
  section_align=include.section_align
  section_height=include.section_height
  section_color=include.section_color
  section_container=include.section_container
  section_title=include.section_title
  section_subtitle=include.section_subtitle
  background_color=include.background_color
  background_image=include.background_image
  background_video=include.background_video
  background_align=include.background_align
  background_overlay=include.background_overlay
  content_align=include.content_align
  content_color=include.content_color
%}

{% if include.grid == '1-1' %}
  {% assign grid = 'uk-child-width-1-1' %}
{% elsif include.grid == '1-2' %}
  {% assign grid = 'uk-child-width-1-2@m' %}
{% elsif include.grid == '1-3' or include.grid == '1-4' %}
  {% capture grid %}
    uk-child-width-1-2@s uk-child-width-{{ include.grid }}@m
  {% endcapture %}
{% elsif include.grid == '1-5' or include.grid == '1-6' %}
  {% capture grid %}
    uk-child-width-1-2@s uk-child-width-1-3@m uk-child-width-{{ include.grid }}@l
  {% endcapture %}
{% else %}
  {% assign grid = 'uk-child-width-expand@m' %}
{% endif %}

{%- assign blocks = (site.blocks | sort: 'card[slug]') -%}
    <div class="{{ grid }} uk-grid-match uk-flex-center" data-uk-grid>
      {% for block in blocks %}
        {% if block.slug contains include.block %}
          <div>
            {% if include.media == 'left' %}
              <div class="uk-card uk-card-large uk-card-{{ include.style }} uk-grid-collapse uk-child-width-1-2@m uk-margin" data-uk-grid>
                <div class="uk-card-media-left">
                  <img src="{% if block.image contains 'http' %}{{ block.image }}{% else %}{{ site.uploads | absolute_url }}{{ block.image }}{% endif %}" alt="{{ block.title }}">
                </div>
                <div class=" uk-flex uk-flex-middle">
                  <div class="uk-card-body">
                    <h3 class="uk-h1">{{ block.title }}</h3>
                    <div class="uk-card-content">
                      {{ block.content }}
                    </div>
                  </div>
                </div>
              </div>
            {% elsif include.media == 'right' %}
              <div class="uk-card uk-card-large uk-card-{{ include.style }} uk-grid-collapse uk-child-width-1-2@s uk-margin" data-uk-grid>
                <div class="uk-flex-last@s uk-card-media-right">
                  <img src="{% if block.image contains 'http' %}{{ block.image }}{% else %}{{ site.uploads | absolute_url }}{{ block.image }}{% endif %}" alt="{{ block.title }}">
                </div>
                <div class=" uk-flex uk-flex-middle">
                  <div class="uk-card-body">
                    <h3 class="uk-h1">{{ block.title }}</h3>
                    <div class="uk-card-content">
                    {{ block.content }}
                    </div>
                  </div>
                </div>
              </div>
            {% elsif include.media == 'top' %}
              <div class="uk-card uk-card-large- uk-border-rounded uk-box-shadow-large uk-card-{{ include.style }}">
                <div class="uk-card-media-top{% if block.icon %} uk-padding uk-padding-remove-bottom{% endif %}">
                  {% if block.icon %}
                  <img class="icon" src="{% if block.icon contains 'http' %}{{ block.icon }}{% else %}{{ site.uploads | absolute_url }}{{ block.icon }}{% endif %}" alt="{{ block.title }}">
                  {% elsif block.image %}
                  <img src="{% if block.image contains 'http' %}{{ block.image }}{% else %}{{ site.uploads | absolute_url }}{{ block.image }}{% endif %}" alt="{{ block.title }}">
                  {% endif %}
                </div>
                <div class="uk-card-body">
                  <h3 class="uk-card-title">{{ block.title }}</h3>
                  <div class="uk-card-content">
                  {{ block.content }}
                  </div>
                </div>
              </div>
            {% elsif include.media == 'bottom' %}
            <div class="uk-card uk-card-large uk-card-{{ include.style }}">
              <div class="uk-card-body">
                <h3 class="uk-card-title">{{ block.title }}</h3>
                <div class="uk-card-content">
                {{ block.content }}
                </div>
              </div>
              <div class="uk-card-media-bottom">
                <img src="{% if block.image contains 'http' %}{{ block.image }}{% else %}{{ site.uploads | absolute_url }}{{ block.image }}{% endif %}" alt="{{ block.title }}">
              </div>
            </div>
            {% else %}
              <div class="uk-card uk-card-{{ include.style }} uk-card-body">
                {% if block.icon %}
                  <span data-uk-icon="icon: {{ block.icon }}; ratio: 2"></span>
                {% endif %}
                <h3 class="uk-card-title">{{ block.title }}</h3>
                {% if block.heading %}
                  <h4 class="uk-heading-medium uk-margin">{{ block.heading }}</h4>
                {% endif %}
                <div class="uk-card-content">
                  {{ block.content }}
                </div>
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
{% include partials/section-close.html 
  section_size=include.section_size 
%}